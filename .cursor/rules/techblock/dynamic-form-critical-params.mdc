# üî• PAR√ÅMETROS CR√çTICOS: formId y name OBLIGATORIOS

**REGLA FUNDAMENTAL**: TODOS los campos de tech-block-lib DEBEN incluir `formId` y `custom.name` definidos y coincidentes. Sin estos par√°metros, los formularios din√°micos y steppers fallan completamente.

## üö® **ERRORES CR√çTICOS CAUSADOS POR OMITIR ESTOS PAR√ÅMETROS:**

### **üî¥ Errores de Compilaci√≥n/Runtime:**
```
ERROR: Falta la propiedad "name" en la configuraci√≥n
ERROR: Cannot find control with unspecified name attribute
```

### **üî¥ Fallas Funcionales:**
- ‚ùå **Formularios no renderizan** ‚Üí Campos vac√≠os o ausentes
- ‚ùå **Steppers muestran contenido vac√≠o** ‚Üí Pasos sin formularios
- ‚ùå **Change detection roto** ‚Üí Requiere clicks manuales para funcionar
- ‚ùå **Navegaci√≥n imposible** ‚Üí Botones Anterior/Siguiente no funcionan
- ‚ùå **Experiencia de usuario completamente rota** ‚Üí Aplicaci√≥n parece no funcionar

## ‚úÖ **PATR√ìN OBLIGATORIO:**

### **Para CUALQUIER tipo de campo:**
```typescript
export const miCampo: ILibTbDynamicFormConfigType = {
  tbType: 'dropdown|input|number|textarea|calendar', // Cualquier tipo
  containerId: 'container-id',
  formId: 'nombreUnico',           // ‚úÖ OBLIGATORIO #1: Para Angular FormControl
  custom: {
    name: 'nombreUnico',           // ‚úÖ OBLIGATORIO #2: Para HTML name attribute
    // CR√çTICO: custom.name DEBE ser igual a formId
    // ... resto de configuraci√≥n espec√≠fica del tipo
  },
  formProps: {
    validators: [...] // Opcional
  }
};
```

### **Ejemplo por tipo de campo:**
```typescript
// ‚úÖ Input de texto
export const nombre: ILibTbDynamicFormConfigType = {
  tbType: 'input',
  containerId: 'personal-container',
  formId: 'nombre',              // ‚úÖ OBLIGATORIO
  custom: {
    name: 'nombre',              // ‚úÖ OBLIGATORIO (igual a formId)
    type: 'text',
    label: 'Nombre completo',
    placeholder: 'Ingresa tu nombre'
  }
};

// ‚úÖ Dropdown/Select
export const pais: ILibTbDynamicFormConfigType = {
  tbType: 'dropdown',
  containerId: 'location-container',
  formId: 'pais',                // ‚úÖ OBLIGATORIO
  custom: {
    name: 'pais',                // ‚úÖ OBLIGATORIO (igual a formId)
    label: 'Pa√≠s',
    options: [
      { id: 'co', label: 'Colombia' },
      { id: 'mx', label: 'M√©xico' }
    ],
    optionLabel: 'label',
    optionValue: 'id'
  }
};

// ‚úÖ N√∫mero/Currency
export const valor: ILibTbDynamicFormConfigType = {
  tbType: 'number',
  containerId: 'financial-container',
  formId: 'valor',               // ‚úÖ OBLIGATORIO
  custom: {
    name: 'valor',               // ‚úÖ OBLIGATORIO (igual a formId)
    label: 'Valor del contrato',
    mode: 'currency',
    currency: 'COP',
    locale: 'es-CO'
  }
};
```

## ‚ùå **ERRORES COMUNES A EVITAR:**

### **‚ùå Error #1: Falta formId**
```typescript
// ‚ùå MAL: Sin formId
export const campo = {
  tbType: 'input',
  containerId: 'container',
  // ‚ùå FALTA: formId
  custom: {
    name: 'campo',
    label: 'Campo'
  }
};
```

### **‚ùå Error #2: Falta name en custom**
```typescript
// ‚ùå MAL: Sin custom.name
export const campo = {
  tbType: 'input',
  containerId: 'container',
  formId: 'campo',
  custom: {
    // ‚ùå FALTA: name
    label: 'Campo'
  }
};
```

### **‚ùå Error #3: formId y name no coinciden**
```typescript
// ‚ùå MAL: formId !== custom.name
export const campo = {
  tbType: 'input',
  containerId: 'container',
  formId: 'campo',
  custom: {
    name: 'otroNombre',        // ‚ùå MAL: Debe ser 'campo'
    label: 'Campo'
  }
};
```

### **‚ùå Error #4: Nombres duplicados**
```typescript
// ‚ùå MAL: Nombres duplicados en el mismo formulario
export const nombre1 = {
  formId: 'nombre',            // ‚ùå Nombre duplicado
  custom: { name: 'nombre' }
};

export const nombre2 = {
  formId: 'nombre',            // ‚ùå Nombre duplicado
  custom: { name: 'nombre' }
};
```

## ‚úÖ **CHECKLIST OBLIGATORIO ANTES DE IMPLEMENTAR:**

### **üîç Verificaci√≥n por campo:**
```typescript
// Para CADA campo de formulario din√°mico:
// 1. ¬øTiene formId definido?                    ‚ñ° S√≠ / ‚ñ° No
// 2. ¬øTiene custom.name definido?              ‚ñ° S√≠ / ‚ñ° No  
// 3. ¬øformId === custom.name?                  ‚ñ° S√≠ / ‚ñ° No
// 4. ¬øEs √∫nico en todo el formulario?          ‚ñ° S√≠ / ‚ñ° No
// 5. ¬øNombre es descriptivo y claro?           ‚ñ° S√≠ / ‚ñ° No
```

### **üîç Verificaci√≥n por formulario:**
```typescript
// Para formularios simples:
// ¬øTODOS los campos pasan el checklist?        ‚ñ° S√≠ / ‚ñ° No

// Para steppers multi-paso:  
// ¬øTODOS los campos del Paso 1 pasan?          ‚ñ° S√≠ / ‚ñ° No
// ¬øTODOS los campos del Paso 2 pasan?          ‚ñ° S√≠ / ‚ñ° No
// ¬øTODOS los campos del Paso N pasan?          ‚ñ° S√≠ / ‚ñ° No
// ¬øNO hay nombres duplicados across pasos?     ‚ñ° S√≠ / ‚ñ° No
```

## üö® **REGLA DE ORO:**

### **NUNCA crear un campo sin formId y custom.name**
```typescript
// ‚úÖ PLANTILLA OBLIGATORIA para cualquier campo nuevo:
export const nuevoCampo: ILibTbDynamicFormConfigType = {
  tbType: 'TIPO_AQUI',           // dropdown, input, number, etc.
  containerId: 'CONTAINER_AQUI', // ID del container donde renderizar
  formId: 'NOMBRE_UNICO_AQUI',   // ‚úÖ CR√çTICO: Para Angular FormControl
  custom: {
    name: 'NOMBRE_UNICO_AQUI',   // ‚úÖ CR√çTICO: Mismo valor que formId
    // ... resto de configuraci√≥n espec√≠fica del tipo
  }
};
```

## üí° **¬øPOR QU√â AMBOS PAR√ÅMETROS SON NECESARIOS?**

### **1. formId ‚Üí Angular FormControl**
- Angular usa `formId` para crear el `FormControl` en el `FormGroup`
- Sin `formId` ‚Üí Angular no puede crear el control ‚Üí "Cannot find control"

### **2. custom.name ‚Üí HTML name attribute**  
- Tech-block-lib usa `custom.name` para el atributo `name` del elemento HTML
- Sin `custom.name` ‚Üí "Falta la propiedad 'name' en la configuraci√≥n"

### **3. Deben coincidir para funcionar**
- Angular busca el control por `formId`
- HTML bindea por `custom.name`  
- Si no coinciden ‚Üí Desconexi√≥n entre Angular y HTML ‚Üí Formulario roto

## üéØ **APLICACI√ìN EN DIFERENTES CONTEXTOS:**

### **‚úÖ Formularios simples (sin stepper):**
- Cada campo DEBE tener formId y custom.name
- Nombres √∫nicos dentro del formulario

### **‚úÖ Formularios con stepper (multi-paso):**
- Cada campo en cada paso DEBE tener formId y custom.name
- Nombres √∫nicos en TODO el stepper (across todos los pasos)
- UN solo campo sin estos par√°metros ‚Üí TODO el stepper falla

### **‚úÖ Formularios anidados o complejos:**
- Misma regla aplica independientemente de la complejidad
- Containers, grupos, secciones ‚Üí No importa
- CADA campo individual DEBE cumplir la regla

---

**RECORDATORIO CR√çTICO**: Esta no es una sugerencia o buena pr√°ctica. Es un **REQUISITO FUNDAMENTAL** para que tech-block-lib funcione. Sin estos par√°metros, los formularios din√°micos simplemente NO FUNCIONAN.
